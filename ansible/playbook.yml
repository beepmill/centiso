---
- hosts: all
  roles:
    - { role: all-pre-configuration, tags: all-pre-configuration }

- hosts:
    - router.example.com
  roles:
    - { role: natgw, tags: natgw }
    - { role: dnsmasq, tags: dnsmasq }
    - { role: pxeserver, tags: pxeserver }
    - { role: gitserver, tags: gitserver }

- hosts: repomirror
  roles:
    - { role: repomirror, tags: repomirror }

- hosts: all
  roles:
    - role: use-local-repo

- hosts:
    - chefserver.example.com
  roles:
    - { role: chefserver, tags: chefserver }

- hosts:
    - chefworkstation.example.com
  roles:
    - { role: chefworkstation, tags: chefworkstation }
